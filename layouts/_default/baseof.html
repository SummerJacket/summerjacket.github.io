<!DOCTYPE html>
<html lang="{{ $.Site.LanguageCode | default "en" }}">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <meta name="description" content="{{ .Site.Params.description }}" />

    {{ $webpackBuild := .Site.Data.webpackAssets.main }}
    {{ with $webpackBuild.css }}
      <link href="{{ relURL (.) }}" rel="stylesheet" />
    {{ end }}
    {{ block "style" . }}{{ end }}

    {{ template "_internal/opengraph.html" . }}
    {{ template "_internal/twitter_cards.html" . }}

    {{ if eq (getenv "HUGO_ENV") "production" | or (eq .Site.Params.env "production") }}
      {{ template "_internal/google_analytics_async.html" . }}
    {{ end }}

    <title>
      {{ block "title" . }}
        {{ with .Params.Title }}
          {{ . }} -
        {{ end }}
        {{ .Site.Title }}
      {{ end }}
    </title>
  </head>
  <body>
    <div x-data="{ darkModeEnabled: window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches }">
      <div class="overflow-x-hidden" :class="{ 'mode-dark': darkModeEnabled }">
        <div class="fixed z-40 right-0 top-0 m-6">
          <button
            @click="darkModeEnabled = !darkModeEnabled"
            class="p-2 bg-gray-800 dark:bg-gray-100 rounded-full shadow-md focus:outline-none focus:shadow-outline"
          >
            <svg
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              viewBox="0 0 24 24"
              class="w-6 h-6 text-gray-100 dark:text-gray-700"
            >
              <path
                x-show="darkModeEnabled"
                d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
              ></path>
              <path
                x-show="!darkModeEnabled"
                d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
              ></path>
            </svg>
          </button>
        </div>
        {{ block "body" . }}{{ end }}
      </div>
    </div>
    {{ block "script" . }}{{ end }}
    {{ with $webpackBuild.js }}
      <script src="{{ relURL (.) }}"></script>
    {{ end }}
  </body>
</html>
